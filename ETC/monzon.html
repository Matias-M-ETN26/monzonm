<html>
    <head>
        <title>Matias Monzon</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <script>
            /*Ejercicios
            1. Cual es el primer y ultimo dia que tiene de informacion el JSON
            2. Hay al menos dos dias seguidos en el que no este despejado? Si/NO
            3. Cuantos registros de tiempo tiene hoy y cuantas el ultimo dia. 
            4. Que dia va a tener la menor temperatura y cual va a ser.
            */
            function ejercicio1(datos){
                    var primer = datos["list"][0]["dt_txt"];
                    var ultimo = datos["list"].length - 1;
                    ultimo = datos["list"][ultimo]["dt_txt"].split(" ")
                    primer = primer.split(" ");
                    $("#ej1R").html("El primer dia que tiene es: "+ primer[0]+".<br>Y el ultimo dia que tiene es: "+ultimo[0]+".");
                    return primer[0]+" "+ultimo[0];
            }
            function ejercicio2(datos){
                var si_no = "No";
                for(i = 0 ; i <= datos["list"].length;i++){
                    var num = i + 1;
                    dia1 = datos["list"][i]["weather"][0]["main"]
                    dia2 = datos["list"][num]["weather"][0]["main"]
                    if(dia1 !== "Clear" ||dia2 !== "Clear"){
                        si_no = "Si";
                        break;
                    }
                }
                $("#ej2R").html(si_no);
            }
            function ejercicio3(datos, primerUltimo){
                var cantPrimer = 0;
                var cantUltimo = 0;
                var primer_ultimo = primerUltimo.split(" ");
                for(i= 0;i < datos["list"].length;i++){
                    var dia = datos["list"][i]["dt_txt"].split(" ");
                    if(primer_ultimo[0] == dia[0]){
                        cantPrimer++;
                    }
                    if(primer_ultimo[1] == dia[0]){
                        cantUltimo++;
                    }
                }
                $("#ej3R").html("Hoy hay "+cantPrimer+" cantidad de registros.<br>Y el ultimo dia tiene "+cantUltimo+" cantidad de registros.");
            }
            function ejercicio4(datos){
                var menorTemp = datos["list"][0]["main"]["temp"];
                for(i=0;i < datos["list"].length;i++){
                    if(menorTemp > datos["list"][i]["main"]["temp"]){
                        menorTemp = datos["list"][i]["main"]["temp"]
                        console.log(menorTemp)
                    }
                }
                menorTempDia = menorTemp["dt_txt"].split(" ");
                $("#ej4R").html("El dia que tendra menor temperatura sera el: "+menorTempDia[0]+"<br>Y su temperatura sera de: "+ menorTemp["main"]["temp"]);
            }
            var api = "2be41a993eaf59fb2c6d4e960c4a2e5f";
            var latitud = -34.6140489;
            var longitud = -58.4078955;
            $.ajax({                
                url: 'https://api.openweathermap.org/data/2.5/forecast?lat='+latitud+'&lon='+longitud+'&appid='+api+'&units=metric&lang=sp',
                dataType: 'json',
                success: function(datos){
                    console.log(datos);

                    var primerUltimo = ejercicio1(datos);

                    ejercicio2(datos);

                    ejercicio3(datos,primerUltimo);

                    ejercicio4(datos);

                }
            });
        </script>
    </head>
    <body>
        <p id="ej1">Ejercicio 1:<br>Cual es el primer y ultimo dia que tiene de informacion el JSON?<br></p>
        <p id="ej1R"></p>
        <p id="ej2">Ejercicio 2:<br>Hay al menos dos dias seguidos en el que no este despejado?<br></p>
        <p id="ej2R"></p>
        <p id="ej3">Ejercicio 3:<br>Cuantos registros de tiempo tiene hoy y cuantas el ultimo dia?<br></p>
        <p id="ej3R"></p>
        <p id="ej4">Ejercicio 4:<br>Que dia va a tener la menor temperatura y cual va a ser?<br></p>
        <p id="ej4R"></p>
    </body>
</html>